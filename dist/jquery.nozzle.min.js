!function(e){e.nozzle={},e.nozzle.version="1.0.0",e.nozzle.renderTimeoutFunction=null,e.nozzle.liveFilter=function(n){var t=this,i={data:null,deferRender:!0,deferRenderDelay:300,filters:[],filterCallback:null,render:!1,renderCallback:null},a=e.extend({},i,n);a.filters.forEach(function(e,n,i){var a=e.value;a.is("select")?a.on("change",function(e){t.filter()}):a.on("keyup",function(e){t.filter()})}),t.filter=function(){var n=e.nozzle.filterData(a.data,a.filters);if("function"==typeof a.filterCallback&&a.filterCallback(n),a.render&&"function"==typeof a.renderCallback)if(a.deferRender){var t=setTimeout(function(){e.nozzle.renderTimeoutFunction===t&&a.renderCallback(n)},a.deferRenderDelay);e.nozzle.renderTimeoutFunction=t}else a.renderCallback(n)}},e.nozzle.filterData=function(n,t){var i=[],a={attribute:null,match:"contains",matchCase:!1,value:null},r=[];return e.isArray(t)?r=t:r.push(t),r.forEach(function(e,n,t){var i=e.value;i instanceof jQuery&&(i=i.val()),e.matchCase||(i=i.toLowerCase()),e._value=i}),n.forEach(function(n,t,l){var o=!0;r.forEach(function(t,i,r){var l,u=!1,f=e.extend({},a,t),s=t.attribute;if(s.indexOf(",")<0?(s=s.trim(),"undefined"==typeof n[s]?u=!0:l=[f.matchCase?n[s]:n[s].toLowerCase()]):(l=[],s.split(",").forEach(function(e,t,i){e=e.trim(),"undefined"!=typeof n[e]&&l.push(f.matchCase?n[e]:n[e].toLowerCase())}),0===l.length&&(u=!0)),u)o=!1;else{var c=f.match,d=f._value;d instanceof jQuery&&(d=d.val());for(var h=!1,b=0;b<l.length;b++){var p=l[b];if("contains"===c)h=p.indexOf(d)>-1;else if("startsWith"===c)h=0===p.indexOf(d);else if("endsWith"===c){var v=p.length-d.length;p.indexOf(d)===v&&(h=!0)}else if("exact"===c)h=0===d.length||p===d;else if("regex"===c){var y=new RegExp(d),m="g";f.matchCase||(m+="i"),null!=p.match(y)&&(h=!0)}if(h)break}o&=h}}),o&&(i.push(n),n.__index=t)}),i},e.nozzle.Model=function(e){Object.defineProperty(this,"_data",{enumerable:!1,writable:!0}),Object.defineProperty(this,"_bindings",{enumerable:!1,writable:!0}),Object.defineProperty(this,"data",{get:function(){return this._data},set:function(e){this._data=e,this._bindings.forEach(function(e,n){e.unbind(),e.apply("data")})}}),this._bindings=[],this.data=e,this.addBinding=function(e){this._bindings.push(e)}},e.nozzle.bind=function(n){var t=new e.nozzle.Binding(n);"undefined"!=typeof n.source?t.apply(n.source):t.apply()},e.nozzle.Binding=function(n){var t={model:null,source:null,map:{}},i=e.extend({},t,n);this.params=i,this.params.model.addBinding(this);var a=function(n,t,i){Object.defineProperty(this,"name",{enumerable:!1,writable:!0}),Object.defineProperty(this,"value",{enumerable:!1,writable:!0}),Object.defineProperty(this,"$listeners",{enumerable:!1,writable:!0}),Object.defineProperty(this,"attribute",{enumerable:!1,writable:!0}),Object.defineProperty(this,"parent",{enumerable:!1,writable:!0}),this.name="_"+n,this.value=t,this.attribute=n,this.parent=i,this.$listeners=[],this.updateValue=function(e){this.value=e},this.notifyListeners=function(n){var t=this;this.$listeners.forEach(function(i,a,r){i.each(function(){var i=e(this);"undefined"!=typeof n&&null!==n&&i.get(0)===n.get(0)||i.val(t.value)})})},this.addListener=function(e){this.$listeners.push(e)}},r=function(e,n){Object.keys(e).forEach(function(n,t,i){var l=e[n];Object.defineProperty(e,"_"+n,{enumerable:!1,value:new a(n,l,e)}),Object.defineProperty(e,n,{get:function(){return this["_"+n].value},set:function(t){var i=e["_"+n];i.value;i.value=t,i.notifyListeners()}}),"object"==typeof e[n]&&r(e[n],e["_"+n])})},l=function(e){var n=i.model.data,t=e.split(".");return t.forEach(function(e,t,i){t===i.length-1&&(e="_"+e),n=n[e]}),n};this.apply=function(n){r(i.model.data),Object.keys(i.map).forEach(function(t,a,r){var o=i.map[t].path,u=i.map[t].changeCallback,f=l(o);f.addListener(e(t)),e(t).on("keyup.nozzle.bind",function(n){f.updateValue(e(this).val()),f.notifyListeners(e(t)),"function"==typeof u&&u()}),"data"===n?f.notifyListeners(null):"ui"===n&&f.updateValue(e(t).val())})},this.unbind=function(){Object.keys(i.map).forEach(function(n,t,i){e(n).off("keyup.nozzle.bind")})}}}(jQuery);
//# sourceMappingURL=jquery.nozzle.min.js.map
