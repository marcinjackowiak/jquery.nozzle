!function(e){e.nozzle={},e.nozzle.version="1.0.0",e.nozzle.renderTimeoutFunction=null,e.nozzle.liveFilter=function(n){var t=this,i={data:null,deferRender:!0,deferRenderDelay:300,filters:[],filterCallback:null,render:!1,renderCallback:null,saveInHash:!1},a=e.extend({},i,n),r=!1;a.filters.forEach(function(n,i,a){var r=n.selector;if(null!==r){var o=e(r);o.is("select")?o.on("change",function(e){t.filter()}):o.on("keyup change",function(e){t.filter()})}}),a.saveInHash&&e(window).on("hashchange",function(){r||t.restoreFromHash(),r=!1}),t.filter=function(){if(a.saveInHash){var n="";a.filters.forEach(function(t,i,a){var r=t.selector;if("undefined"!=typeof r){var o=e(r);i>0&&(n+="&"),n+=encodeURIComponent(r)+"="+encodeURIComponent(o.val())}});var t="JQN"+btoa(n);window.history&&window.history.replaceState?history.replaceState(void 0,void 0,"#"+t):location.hash=t}var i=e.nozzle.filterData(a.data,a.filters);if("function"==typeof a.filterCallback&&a.filterCallback(i),a.render&&"function"==typeof a.renderCallback)if(a.deferRender){var r=setTimeout(function(){e.nozzle.renderTimeoutFunction===r&&a.renderCallback(i)},a.deferRenderDelay);e.nozzle.renderTimeoutFunction=r}else a.renderCallback(i)},t.restoreFromHash=function(){var n=location.hash;if(1===n.indexOf("JQN"))for(var t=atob(n.substring(4)),i=t.split("&"),a=0;a<i.length;a++){var r=i[a].split("="),o=decodeURIComponent(r[0]),l=decodeURIComponent(r[1]),s=e(o);s.length>0&&s.val(l).trigger("change")}},a.saveInHash&&t.restoreFromHash()},e.nozzle.filterData=function(n,t){var i=[],a={attribute:null,match:"contains",matchCase:!1,selector:null,value:null},r=[];return e.isArray(t)?r=t:r.push(t),r.forEach(function(n,t,i){var a=n.selector,r=null;r=null!=a?e(a).val():n.value,n.matchCase||(r=r.toLowerCase()),n._value=r}),n.forEach(function(n,t,o){var l=!0;r.forEach(function(t,i,r){var o,s=!1,f=e.extend({},a,t),u=t.attribute;if(u.indexOf(",")<0?(u=u.trim(),"undefined"==typeof n[u]?s=!0:o=[f.matchCase?n[u]:n[u].toLowerCase()]):(o=[],u.split(",").forEach(function(e,t,i){e=e.trim(),"undefined"!=typeof n[e]&&o.push(f.matchCase?n[e]:n[e].toLowerCase())}),0===o.length&&(s=!0)),s)l=!1;else{var c=f.match,d=f._value;d instanceof jQuery&&(d=d.val());for(var h=!1,p=0;p<o.length;p++){var v=o[p];if("contains"===c)h=v.indexOf(d)>-1;else if("startsWith"===c)h=0===v.indexOf(d);else if("endsWith"===c){var b=v.length-d.length;v.indexOf(d)===b&&(h=!0)}else if("exact"===c)h=0===d.length||v===d;else if("regex"===c){var y=new RegExp(d),m="g";f.matchCase||(m+="i"),null!=v.match(y)&&(h=!0)}if(h)break}l&=h}}),l&&(i.push(n),n.__index=t)}),i},e.nozzle.Model=function(e){Object.defineProperty(this,"_data",{enumerable:!1,writable:!0}),Object.defineProperty(this,"_bindings",{enumerable:!1,writable:!0}),Object.defineProperty(this,"data",{get:function(){return this._data},set:function(e){this._data=e,this._bindings.forEach(function(e,n){e.unbind(),e.apply("data")})}}),this._bindings=[],this.data=e,this.addBinding=function(e){this._bindings.push(e)}},e.nozzle.Binding=function(n){var t={model:null,source:null,changeCallback:null,map:{}},i=e.extend({},t,n);this.params=i,this.params.model.addBinding(this);var a=function(n,t,i){Object.defineProperty(this,"name",{enumerable:!1,writable:!0}),Object.defineProperty(this,"value",{enumerable:!1,writable:!0}),Object.defineProperty(this,"$listeners",{enumerable:!1,writable:!0}),Object.defineProperty(this,"attribute",{enumerable:!1,writable:!0}),Object.defineProperty(this,"parent",{enumerable:!1,writable:!0}),this.name="_"+n,this.value=t,this.attribute=n,this.parent=i,this.$listeners=[],this.updateValue=function(e){this.value=e},this.notifyListeners=function(n){var t=this;this.$listeners.forEach(function(i,a,r){i.each(function(){var i=e(this);"undefined"!=typeof n&&null!==n&&i.get(0)===n.get(0)||i.val(t.value)})})},this.addListener=function(e){this.$listeners.push(e)}},r=function(e,n){Object.keys(e).forEach(function(n,t,i){var o=e[n];Object.defineProperty(e,"_"+n,{enumerable:!1,value:new a(n,o,e)}),Object.defineProperty(e,n,{get:function(){return this["_"+n].value},set:function(t){var i=e["_"+n];i.value;i.value=t,i.notifyListeners()}}),"object"==typeof e[n]&&r(e[n],e["_"+n])})},o=function(e){var n=i.model.data,t=e.split(".");return t.forEach(function(e,t,i){t===i.length-1&&(e="_"+e),n=n[e]}),n};this.apply=function(n){r(i.model.data);var t=i.changeCallback;Object.keys(i.map).forEach(function(a,r,l){var s=i.map[a].path,f=i.map[a].changeCallback,u=o(s);if("undefined"!=typeof u){u.addListener(e(a));var c="keyup.nozzle.bind";e(a).is("select")&&(c="change.nozzle.bind"),e(a).on(c,function(n){u.updateValue(e(this).val()),u.notifyListeners(e(a)),"function"==typeof f&&f("ui"),"function"==typeof t&&t("ui",s)}),"data"===n?u.notifyListeners(null):"ui"===n&&u.updateValue(e(a).val())}})},this.unbind=function(){Object.keys(i.map).forEach(function(n,t,i){var a="keyup.nozzle.bind";e(n).is("select")&&(a="change.nozzle.bind"),e(n).off(a)})}},e.nozzle.bind=function(n){var t=new e.nozzle.Binding(n);"undefined"!=typeof n.source?t.apply(n.source):t.apply()}}(jQuery);
//# sourceMappingURL=jquery.nozzle.min.js.map
